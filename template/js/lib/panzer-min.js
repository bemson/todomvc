/* Panzer v0.3.5 + genData v2.0.1 | github.com/bemson | (c) 2012, MIT */
;((typeof exports!="undefined"?exports:window).genData=function a(b){function p(a,b){this.name=a,this.value=b}if(this instanceof a)return this;var c,d,e,f=[["",b]],g,h,i,j={},k,l,m=[].slice.call(arguments).slice(1).filter(function(a){return typeof a=="function"}),n=m.length,o=[];p.prototype=(typeof this=="function"?this:a).prototype;while(f.length){i=f.shift(),d=new p(i[0],i[1]),c=0,k={omit:0,scan:1,exit:0,parent:null},l=[i[0],i[1],i[2],o,k,j];while(c<n&&!k.exit)m[c++].apply(d,l);k.omit?d._OMIT=!0:o.push(d);if(k.exit)f=[];else{h=[],g=k.parent!==null?k.parent:d.value;if(k.scan&&typeof g=="object"){for(e in g)g.hasOwnProperty(e)&&h.push([e,g[e],d]);f=h.concat(f)}}}return o}).spawn=function b(){function d(b){return this instanceof d?this:a.apply(typeof this=="function"?this:d,[b].concat(c,[].slice.call(arguments).slice(1)))}var a=this,c=[].slice.call(arguments).filter(function(a){return typeof a=="function"});return d.prototype=new a,d.spawn=b,d};
!function(a,b,c,d,e,f){function o(a,b,c,f){var g=this;g.panzer=i=a,g.y=[{},{},function(b,c){return b===a?c?(g.pkgs[a.i[c]]||{}).inst||!1:g:j}],a.d.forEach(function(a){var b=a.def.tagKey,c=a.def.badKey;a.c={af:typeof b=="function"?b:0,ar:b&&b instanceof d?b:0,nf:typeof c=="function"?c:0,nr:c&&c instanceof d?c:0}}),a.d&&a.d.forEach(function(a){var b;typeof a.def.prepTree=="function"&&typeof (b=a.def.prepTree.call(e,c))!="undefined"&&(c=b)}),g.nodes=l(c),i=0,g.nodes[0].parentIndex=g.nodes[0].childIndex=0,g.nodes.unshift(l()[0]),g.nodes[0].children.push(1),g.nodes[0].name="PNULL",g.nodes[0].index=0,g.nodes[0].depth=0,g.nodes[0].path="..//",g.nodes[0].ctx=1,g.nodes[0].firstChildIndex=g.nodes[0].lastChildIndex=1,g.tank={id:a.c++,currentIndex:0,targetIndex:-1,go:function(a){var b=g.nodes[a];return b&&(g.target=b,g.tank.targetIndex=b.index),g.stop=0,g.go()},stop:function(){return g.stop=1,!!g.loop},post:function(a){switch(typeof a){case"function":return g.posts.push(a)-1;case"number":if(g.posts[a])return g.posts[a]=0,!0}return!1}},g.posts=[],g.current=g.nodes[0],g.target=g.loop=0,g.pkgs=a.d.map(function(a){function c(){}var b={name:a.name,inst:new a.def};return c.prototype=a.proxy.prototype,g.y[0][a.name]=b.proxy=new c,g.y[1][a.name]=b.inst,b.inst.pkgs=g.y[1],b.inst.nodes=m.call(a.node,g.nodes),b.inst.tank=g.tank,typeof a.def.init=="function"&&a.def.init.call(b.inst,f),b}),g.pkgs.forEach(function(a,c,d){a.proxy.pkgs=g.y[0],a.proxy.toString=g.y[2],a.inst.proxy=b}),b.pkgs=g.y[0],b.toString=g.y[2],this.ret=1}function p(a,b){return typeof b=="string"&&a&&this.d[a-1].proxy.prototype[b]||!1}function q(a){var b=this;if(arguments.length){if(typeof a=="string"&&/\w/.test(a)){if(!b.i.hasOwnProperty(a)){function c(c){if(!(this instanceof arguments.callee))return c instanceof b.d[0].proxy&&c.toString(b,a)}c.getSuper=function(a){return p.call(b,this.index,a)},c.init=c.tagKey=c.badKey=c.onBegin=c.onEnd=c.onTraverse=c.prepTree=c.prepNode=0;function d(){}d.prototype=new b.Y,b.P.prototype=c.proxy=d.prototype,b.Y=d;function e(){}c.node=e.prototype,c.index=b.i[a]=b.d.push({name:a,def:c,proxy:d,node:e})-1}return b.d[b.i[a]].def}return!1}return b.d.map(function(a){return a.name})}if(!a&&e.Panzer)return;var g=a?exports:e,h=(a?require("genData"):e).genData,i,j={}.toString(),k=function(a,b,c){var d=a+"f",f=a+"r";return i.d.some(function(a){if(a.c[d])return a.c[d].call(e,b,c);if(a.c[f])return a.c[f].test(b)})},l=h.spawn(function(a,b,c,d,g,h){var j=this,l=c&&k("n",a,b),m=c&&!l&&k("a",a,b);l||m?(g.omit=1,g.scan=0,m&&!l&&(c.tags[a]=b)):(j.ctx=j.parentIndex=j.previousIndex=j.nextIndex=j.firstChildIndex=j.lastChildIndex=j.childIndex=f,j.index=d.length+1,j.depth=c?c.depth+1:1,j.name=c?a:"PROOT",j.tags={},j.path=c?c.path+a+"/":"//",j.children=[],c&&(j.parentIndex=c.index,c.children.length||(c.firstChildIndex=j.index),j.childIndex=c.children.push(j.index)-1,c.lastChildIndex=j.index,j.childIndex&&(j.previousIndex=c.children[j.childIndex-1],d[j.previousIndex-1].nextIndex=j.index)),c&&i.d&&i.d.reverse().some(function(a){var c=a.def,f;if(typeof c.prepNode=="function"&&typeof (f=c.prepNode.call(e,b,d[0].value))!="undefined")return g.parent=f,!0}))}),m=h.spawn(function(a,b,c,d,e){if(!c)e.omit=1;else{e.scan=0;for(var f in b)b.hasOwnProperty(f)&&f!=="ctx"&&(this[f]=b[f])}}),n=b.prototype;o.prototype={go:function(){var a=this,b=a.nodes,c=a.tank,d,e=0,f=a.current,g=0,h=0,i;if(a.loop)return!!a.target;a.posts=[],a.loop=1,a.fire("Begin");while(a.loop)a.target&&!a.stop?(i=0,d=a.target.index-f.index,d?d>0&&f.index<2||!a.target.path.indexOf(f.path)?f.ctx?(g=0,h=f.firstChildIndex):(g=1,h=1,f.ctx=1):f.ctx?(g=1,h=2,f.ctx=0):(a.target.path.indexOf(b[f.parentIndex].path)&&(d=-1),h=d<0?4:3,f.lastEvent===2||f.lastEvent===h||f.lastEvent+h===7?(g=0,h=d>0?f.nextIndex:f.previousIndex||f.parentIndex):g=1):(g=1,h=f.ctx?0:1,f.ctx&&(a.target=0,c.targetIndex=-1),f.ctx=1),g?(f.lastEvent=h,e++,a.fire("Traverse",[h])):(f.lastEvent=0,f=a.current=b[h],c.currentIndex=h)):!i&&(a.stop||!a.target)?(i=1,a.fire("End")):a.loop=0;return a.posts.forEach(function(a){a&&a()}),e},fire:function(a,b){var c=this.panzer;if(!this.ret)return;b=b||[],b.unshift(a.toLowerCase()),this.pkgs.forEach(function(d){var e=c.d[c.i[d.name]].def["on"+a];typeof e=="function"&&e.apply(d.inst,b)})}},g.Panzer={version:"0.3.5",create:function(){function b(b,c){if(!(this instanceof arguments.callee))throw new Error("Missing new operator.");new o(a,this,b,typeof c=="object"?c:{})}var a={c:0,d:[],i:{},Y:function(){},P:b};return b.pkg=function(b){return q.apply(a,arguments)},b}}}(typeof require!="undefined",Array,Object,RegExp,this);